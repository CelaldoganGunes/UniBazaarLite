@page
@model UniBazaarLite.Pages.Items.IndexModel
@inject IUserContextService UserContext
@{
    ViewData["Title"] = "Classifieds";
}

<h2>Classifieds - Items for Sale</h2>

@if (Model.Items.Any())
{
    <ul class="list-unstyled">
    @foreach (var item in Model.Items)
    {
        <li class="mb-3">
            <strong>@item.Title</strong> â€“ @item.Price.ToString("C")<br />
            <small>@item.Description</small><br />

            <span class="text-muted">Seller: @item.Seller</span><br />

            <a class="btn btn-sm btn-outline-primary mt-1"
               asp-page="/Items/Details"
               asp-route-id="@item.Id">
                View Details
            </a>

            @if (UserContext.IsAdmin)
            {
                <a class="btn btn-sm btn-outline-secondary mt-1 ms-2"
                   asp-controller="Items"
                   asp-action="Edit"
                   asp-route-id="@item.Id">
                    Edit
                </a>
            }
        </li>
    }
    </ul>
}
else
{
    <p>No items found.</p>
}
